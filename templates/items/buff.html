<form class="{{cssClass}} flexcol" autocomplete="off">

  {{!-- Item Sheet Header --}}
  <header class="sheet-header flexrow">
    <div class="sheet-header-profile">
      <img class="profile" src="{{item.img}}" title="{{item.name}}" data-edit="img"/>
    </div>

    <div class="header-details flexrow">
      <h1 class="charname">
        <input name="name" type="text" value="{{item.name}}" placeholder="{{localize "D3Vilia.BuffName"}}"/>
      </h1>

      <div class="item-subtitle">
        <h4 class="item-type">{{itemType}}</h4>
        <span class="item-status">{{itemStatus}}</span>
      </div>

      <ul class="summary">
        <li>
          {{labels.buffType}}
        </li>
        <li class="tooltip">
          <span class="tooltipcontent">@item.level : {{data.level}}</span>
          <input type="text" name="data.level" value="{{#if data.level}}{{data.level}}{{/if}}" placeholder="{{localize "D3Vilia.Level"}}"/>
        </li>
      </ul>
    </div>
  </header>

  <section class="sheet-content flexcol">
  {{!-- Item Sheet Navigation --}}
  <nav class="sheet-navigation tabs" data-group="primary">
    <a class="item active" data-tab="description">{{ localize "D3Vilia.Description" }}</a>
    <a class="item" data-tab="timeline">{{ localize "D3Vilia.Timeline" }}</a>
    <a class="item" data-tab="special-actions">{{ localize "D3Vilia.SpecialActions" }}</a>
    <a class="item" data-tab="changes">{{ localize "D3Vilia.Changes" }}</a>
  </nav>

  {{!-- Item Sheet Body --}}
  <section class="primary-body">

    {{!-- Description Tab --}}
    <div class="tab flexcol active" data-group="primary" data-tab="description">
      {{editor content=data.description.value target="data.description.value" button=true owner=owner editable=editable}}
    </div>

    {{!-- Timeline Tab --}}
    <div class="tab flexcol" data-group="primary" data-tab="timeline">
        <em style="flex: none">{{localize "D3Vilia.TimelineInfo"}}</em>
        <div class="form-group">
          <label>{{localize "D3Vilia.TimelineEnabled"}}</label>
          <input type="checkbox" name="data.timeline.enabled" {{checked data.timeline.enabled}}/>
        </div>
        {{!-- Total time --}}
        <div class="form-group">
          <label>{{localize "D3Vilia.TimelineFormula"}}</label>
          <input type="text" name="data.timeline.formula" value="{{data.timeline.formula}}" data-dtype="String" />
        </div>
        {{!-- Total time --}}
        <div class="form-group">
          <label>{{localize "D3Vilia.TimelineTotal"}}</label>
          <input type="text" name="data.timeline.total" value="{{data.timeline.total}}" data-dtype="Number" disabled />
        </div>

        {{!-- Elapsed time --}}
        <div class="form-group">
          <label>{{localize "D3Vilia.TimelineElapsed"}}</label>
          <input type="text" name="data.timeline.elapsed" value="{{data.timeline.elapsed}}" data-dtype="Number"/>
        </div>

        <div class="form-group">
          <label>{{localize "D3Vilia.TimelineDeleteOnExpiry"}}</label>
          <input type="checkbox" name="data.timeline.deleteOnExpiry" {{checked data.timeline.deleteOnExpiry}}/>
        </div>
    </div>
    <div class="tab flexcol" data-group="primary" data-tab="special-actions">
      <h4 class="attack-header">
        {{localize "D3Vilia.Activate"}} {{localize "D3Vilia.SpecialActions"}}
        <a class="a-special-control add-special"><i class="fas fa-plus"></i></a>
      </h4>
      <ol class="special-parts form-group">
        {{#each data.activateActions as |part a|}}
        <li class="special-part flexcol" data-activate-actions="{{a}}">
          <div class="flexrow"><span>Name:</span><input type="text" name="data.activateActions.{{a}}.name" placeholder="{{localize "D3Vilia.Name"}}" value="{{lookup this "name"}}"/></div>
          <div class="flexrow"><span>Action:</span><input type="text" name="data.activateActions.{{a}}.action" placeholder="{{localize "D3Vilia.Action"}}" value="{{lookup this "action"}}"/></div>
          <div class="flexrow"><span>Condition:</span><input type="text" name="data.activateActions.{{a}}.condition" placeholder="{{localize "D3Vilia.Condition"}}" value="{{lookup this "condition"}}"/></div>
          <div class="flexrow"><span>Icon path:</span><input type="text" name="data.activateActions.{{a}}.img" placeholder="{{localize "D3Vilia.Image"}}" value="{{lookup this "img"}}"/></div>
          <a class="a-special-control delete-special"><i class="fas fa-minus"></i>Remove</a>

        </li>
        {{/each}}
      </ol>
      <h4 class="attack-header">
        {{localize "D3Vilia.Deactivate"}} {{localize "D3Vilia.SpecialActions"}}
        <a class="d-special-control add-special"><i class="fas fa-plus"></i></a>
      </h4>
      <ol class="special-parts form-group">
        {{#each data.deactivateActions as |part a|}}
        <li class="special-part flexcol" data-deactivate-actions="{{a}}">
          <div class="flexrow"><span>Name:</span><input type="text" name="data.deactivateActions.{{a}}.name" placeholder="{{localize "D3Vilia.Name"}}" value="{{lookup this "name"}}"/></div>
          <div class="flexrow"><span>Action:</span><input type="text" name="data.deactivateActions.{{a}}.action" placeholder="{{localize "D3Vilia.Action"}}" value="{{lookup this "action"}}"/></div>
          <div class="flexrow"><span>Condition:</span><input type="text" name="data.deactivateActions.{{a}}.condition" placeholder="{{localize "D3Vilia.Condition"}}" value="{{lookup this "condition"}}"/></div>
          <div class="flexrow"><span>Icon path:</span><input type="text" name="data.deactivateActions.{{a}}.img" placeholder="{{localize "D3Vilia.Image"}}" value="{{lookup this "img"}}"/></div>
          <a class="d-special-control delete-special"><i class="fas fa-minus"></i>Remove</a>

        </li>
        {{/each}}
      </ol>
    </div>
    <div class="tab flexcol" data-group="primary" data-tab="changes">
      <div class="form-group select">
        <label>{{localize "D3Vilia.Type"}}</label>
        <select name="data.buffType" value="{{data.buffType}}">
          {{#select data.buffType}}
          {{#each config.buffTypes as |type a|}}
          <option value="{{a}}">{{type}}</option>
          {{/each}}
          {{/select}}
        </select>
      </div>
      {{#unless isShapechangeBuff}}
      <div class="form-group">
        <label>{{localize "D3Vilia.HideBuffFromToken"}}</label>
        <label class="checkbox" style="position: relative; flex: 0 20px">
          <input type="checkbox" class="stylized" name="data.hideFromToken" {{checked data.hideFromToken}}/>
          <span class="checkmark"></span>
        </label>
      </div>
      {{/unless}}
      {{> "systems/D3Vilia/templates/items/parts/item-changes.html"}}

      {{> "systems/D3Vilia/templates/items/parts/item-notes.html"}}
      {{#if isGM}}
      <h3 class="form-header">System Properties</h3>
      <div class="form-group">
        <label>UID</label>
        <input type="text" name="data.uniqueId" value="{{data.uniqueId}}" data-dtype="String"/>
      </div>
      {{/if}}
    </div>
  </section>
  </section>
</form>
